# üê≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## –ü—Ä–æ–±–ª–µ–º–∞

–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ **–±–µ–∑ bind mount**, –ø–æ—ç—Ç–æ–º—É:
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå –ù–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å **—Å—Ç–∞—Ä—ã–π –∫–æ–¥** –∏–∑ —Å–≤–æ–µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ `/app`
- ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –¥–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

## –†–µ—à–µ–Ω–∏–µ: Bind Mount

–ù—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å **bind mount**, —á—Ç–æ–±—ã –∫–æ–¥ –Ω–∞ —Ö–æ—Å—Ç–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

## –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å docker-compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ** —Å–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç):
   ```bash
   ssh root@85.193.89.214
   cd /root/ai_trainer_cursor
   nano .env
   ```
   
   –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   ```
   BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
   OPENAI_API_KEY=–≤–∞—à_–∫–ª—é—á
   # –∏ –¥—Ä—É–≥–∏–µ...
   ```

2. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ docker-compose:
   ```bash
   cd /root/ai_trainer_cursor
   docker-compose down
   docker-compose up -d
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å docker_run.sh

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
   ```bash
   scp docker_run.sh root@85.193.89.214:/root/ai_trainer_cursor/
   ```

2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   ssh root@85.193.89.214
   cd /root/ai_trainer_cursor
   chmod +x docker_run.sh
   ./docker_run.sh
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –í—Ä—É—á–Ω—É—é

```bash
ssh root@85.193.89.214

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker stop tg-miniapp-bot-1
docker rm tg-miniapp-bot-1

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
cd /root/ai_trainer_cursor
nano .env

# –°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑
docker build -t tg-miniapp-bot .

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å bind mount
docker run -d \
    --name tg-miniapp-bot-1 \
    --restart unless-stopped \
    --env-file .env \
    -v /root/ai_trainer_cursor:/app \
    -w /app \
    tg-miniapp-bot \
    python bot.py
```

## –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å bind mount:

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞** –≤ `/root/ai_trainer_cursor` –±—É–¥–µ—Ç —Å—Ä–∞–∑—É –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞**: `docker restart tg-miniapp-bot-1`
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤**: `docker logs -f tg-miniapp-bot-1`

## –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π deploy.sh

–§–∞–π–ª `deploy.sh` —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–∞–Ω–¥—É:
```bash
docker restart tg-miniapp-bot-1
```

–î–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–¥ –ª–æ–∫–∞–ª—å–Ω–æ
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `./deploy.sh` –∏–ª–∏ `./start_sync.sh`
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `docker restart tg-miniapp-bot-1` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å

## –í–∞–∂–Ω–æ

‚ö†Ô∏è **–§–∞–π–ª `.env` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –∏ –ù–ï –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å –≤ Git (—É–∂–µ –≤ `.gitignore`).

–°–æ–∑–¥–∞–π—Ç–µ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ –∑–∞–¥–∞–Ω—ã –Ω–∞–ø—Ä—è–º—É—é).
